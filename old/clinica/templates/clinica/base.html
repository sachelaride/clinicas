

{% load static %} {# Carrega as tags de template para lidar com arquivos estáticos #}
<!DOCTYPE html>
{# Define o tipo de documento HTML e o idioma da página #}
<html lang="pt-br">
<head>
    {# Define a codificação de caracteres para o documento #}
    <meta charset="UTF-8">
    {# Configura a viewport para garantir responsividade em diferentes dispositivos #}
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {# Título da página, exibido na aba do navegador #}
    <title>Sistema de Clínicas</title>
    {# Inclui o CSS do Bootstrap para estilização padrão e responsividade #}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    {# Inclui o CSS personalizado do projeto para sobrescrever e adicionar estilos #}
    <link href="{% static 'css/styles.css' %}" rel="stylesheet">
    {# Inclui a biblioteca Font Awesome para ícones vetoriais #}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    {# Inclui o CSS do Flatpickr para estilização do seletor de data e hora #}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    {# Inclui o CSS do Toastify para estilização das notificações pop-up #}
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
</head>
<body>
    {# Barra de navegação principal do sistema #}
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container-fluid">
            {# Link para a página inicial do sistema, exibindo o nome da clínica #}
            <a class="navbar-brand" href="{% url 'clinica:index' %}">Sistema de Clínicas</a>
            {# Botão para alternar a navegação em dispositivos móveis (menu hambúrguer) #}
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            {# Conteúdo da barra de navegação que colapsa em telas menores #}
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    {# Verifica se o usuário está autenticado para exibir itens de menu #}
                    {% if user.is_authenticated %}
                        {# Menu específico para usuários com perfil de Coordenador #}
                        {% if user.perfil == 'COORDENADOR' %}
                            <li class="nav-item">
                                <a class="nav-link" href="{% url 'clinica:user_list' %}"><i class="fa-solid fa-users"></i> Usuários</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="{% url 'clinica:clinica_list' %}"><i class="fa-solid fa-hospital"></i> Clínicas</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="{% url 'clinica:lancamentofinanceiro_list' %}"><i class="fa-solid fa-money-bill-wave"></i> Financeiro</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="{% url 'clinica:lead_list' %}"><i class="fa-solid fa-handshake"></i> CRM</a>
                            </li>
                        {% endif %}
                        {# Menu geral para usuários autenticados #}
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'clinica:paciente_list' %}"><i class="fa-solid fa-user-injured"></i> Pacientes</a>
                        </li>
			<li class="nav-item">
                            <a class="nav-link" href="{% url 'clinica:agendamento_list' %}"><i class="fa-solid fa-calendar-days"></i> Agendamentos</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'clinica:atendimento_list' %}"><i class="fa-solid fa-file-medical"></i> Atendimentos</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'clinica:documento_list' %}"><i class="fa-solid fa-folder-open"></i> Documentos</a>
                        </li>
                        {% if user.perfil == 'PROFISSIONAL' %}
                            <li class="nav-item">
                                <a class="nav-link" href="{% url 'clinica:profissional_dashboard' %}"><i class="fa-solid fa-user-md"></i> Portal Profissional</a>
                            </li>
                        {% elif user.is_authenticated and user.perfil != 'ATENDENTE' and user.perfil != 'PROFISSIONAL' and user.perfil != 'COORDENADOR' %}
                            <li class="nav-item">
                                <a class="nav-link" href="{% url 'clinica:paciente_dashboard' %}"><i class="fa-solid fa-user"></i> Portal Paciente</a>
                            </li>
                        {% endif %}
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'clinica:logout' %}"><i class="fa-solid fa-right-from-bracket"></i> Sair</a>
                        </li>
                    {% else %}
                        {# Menu para usuários não autenticados #}
                        <li class="nav-item">
                            <a class="nav-link" href="{% url 'clinica:login' %}">Login</a>
                        </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>
    {# Contêiner principal para o conteúdo de cada página #}
    <div class="container mt-4">
        {# Bloco de conteúdo onde os templates filhos irão inserir seu HTML #}
        {% block content %}
        {% endblock %}
    </div>
    {# Inclui o JavaScript do Bootstrap para funcionalidades interativas #}
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    {# Inclui o JavaScript do Flatpickr para o seletor de data e hora #}
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    {# Inclui o arquivo de localização em português para o Flatpickr #}
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/pt.js"></script>
    {# Inclui o JavaScript do Toastify para exibir notificações #}
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    {# Script JavaScript para exibir mensagens do Django usando Toastify #}
    <script>
        {% if messages %} {# Verifica se existem mensagens do Django para exibir #}
            {% for message in messages %} {# Itera sobre cada mensagem #}
                Toastify({ {# Inicializa uma nova notificação Toastify #}
                    text: "{{ message }}", {# Texto da mensagem #}
                    duration: 3000, {# Duração da notificação em milissegundos #}
                    close: true, {# Permite fechar a notificação #}
                    gravity: "top", // Posição vertical da notificação (`top` ou `bottom`) #}
                    position: "right", // Posição horizontal da notificação (`left`, `center` ou `right`) #}
                    stopOnFocus: true, // Pausa o timer da notificação quando o mouse está sobre ela #}
                    style: { {# Estilos CSS personalizados para a notificação #}
                        background: "{% if message.tags == 'success' %}#27ae60{% elif message.tags == 'error' %}#c0392b{% elif message.tags == 'warning' %}#f39c12{% else %}#3498db{% endif %}", {# Define a cor de fundo com base na tag da mensagem #}
                    },
                    onClick: function(){} // Função a ser executada ao clicar na notificação (vazia neste caso) #}
                }).showToast(); {# Exibe a notificação #}
            {% endfor %}
        {% endif %}
    </script>
    {# Bloco extra para scripts JavaScript específicos de templates filhos #}
    {% block extra_body %}{% endblock %}
</body>
</html>
